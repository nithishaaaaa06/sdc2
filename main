SET 1:
BUBBLESORT:

1)let arr = [5, 2, 9, 1, 5, 6];

for (let i = 0; i < arr.length; i++) {
    for (let j = 0; j < arr.length - i - 1; j++) {
        if (arr[j] > arr[j + 1]) {
            let temp = arr[j];
            arr[j] = arr[j + 1];
            arr[j + 1] = temp;
        }
    }
}

console.log("Sorted Array:", arr);

2)Create a form such that, based on student roll number, the student 
details are fetched using ExpressJS. 
<!DOCTYPE html>
<html>
<body>
<form action="/student" method="GET">
  Roll No: <input name="r">
  <button type="submit">Get</button>
</form>
</body>
</html>

const express = require("express");
const app = express();
const path = require("path");
const students = {
    1: "John - Age 20",
    2: "Nithisha - Age 21"
};
app.get("/", (req, res) => {
    res.sendFile(path.join(__dirname, "index.html"));
});
app.get("/student", (req, res) => {
    const roll = req.query.r;
    res.send(students[roll] || "Student Not Found");
});
-------------------------------------------
SET2:
1. Write a JS program to list the properties of a JavaScript object.  
2. Write a NodeJS program to read from a file and display the content on 
screen.
1)
let obj = { name: "Nithisha", age: 22, gender: "Female" };
console.log(Object.keys(obj));
2)
const fs = require("fs");
fs.readFile("sample.txt", "utf8", (err, data) => {
    if (err) return console.log("Error reading file");
    console.log("File Content:", data);
});
--------------------------------------------------------
SET-3:
1. Write a JS/HTML program to take name, rollno, marks and display 
GPA in a table.  
2. Create a simple website for CRUD operations on student DB using 
Express Routing. 
1)
<form onsubmit="calc(event)">
  Name: <input id="n">
  Roll No: <input id="r">
  Marks: <input id="m">
  <button>Submit</button>
</form>
<table border="1" id="out"></table>
<script>
function calc(e){
  e.preventDefault();
  let gpa = (m.value/10).toFixed(2);
  out.innerHTML = `
    <tr><td>Name</td><td>${n.value}</td></tr>
    <tr><td>Roll</td><td>${r.value}</td></tr>
    <tr><td>GPA</td><td>${gpa}</td></tr>`;
}
</script>
2)
const express = require("express");
const app = express();
app.use(express.json());
let students = [
  { name: "Nithisha", roll: 10, marks: 95 },
  { name: "Akash", roll: 12, marks: 88 }
];
app.get("/", (req, res) => {
  res.send("Welcome to Student CRUD API");
});
app.get("/students", (req, res) => res.json(students));
app.post("/students", (req, res) => {
  students.push(req.body);
  res.send("Student added");
});
app.put("/students/:id", (req, res) => {
  students[req.params.id] = req.body;
  res.send("Updated");
});
app.delete("/students/:id", (req, res) => {
  students.splice(req.params.id, 1);
  res.send("Deleted");
});
app.listen(3000, () => console.log("Running on 3000"));
--------------------------------------------------------
SET-4:
1. Write a JS program to implement Quick Sort.  
2. Write a Node.js program that accepts a filename & text, append if exists 
or create new.
1)
function quickSort(arr) {
    if (arr.length < 2) return arr;
    let pivot = arr[0];
    let left = arr.slice(1).filter(x => x < pivot);
    let right = arr.slice(1).filter(x => x >= pivot);
    return [...quickSort(left), pivot, ...quickSort(right)];
}
console.log(quickSort([5,3,8,4,2]));
2)
const fs = require("fs");
const filename = "data.txt";
const text = "Hello World\n";
fs.appendFile(filename, text, err => {
    if (err) console.log(err);
    else console.log("Text written");
});
------------------------------------------------------------
SET 5 
1. Write a JS program to swap the case of each character in a string.  
2. Create a Student Database in MongoDB with all details.  
1)
let str = "Hello World";
let result = str.split("").map(ch =>
    ch === ch.toUpperCase() ? ch.toLowerCase() : ch.toUpperCase()
).join("");
console.log(result);
2)
const mongoose = require("mongoose");
mongoose.connect("mongodb://localhost:27017/studentDB");
const studentSchema = new mongoose.Schema({
    name: String,
    roll: Number,
    marks: Number
});
module.exports = mongoose.model("Student", studentSchema);
------------------------------------------------
SET-6:
1. Write a JS program to remove duplicate items (ignore case).  
2. Write a Node.js server that accepts a port number and runs a server. 
1)
let arr = ["Apple", "apple", "Banana", "BANANA"];
let result = [...new Set(arr.map(x => x.toLowerCase()))];
console.log(result);
2)
const http = require("http");
const port = process.argv[2] || 3000;
http.createServer((req, res) => {
    res.end("Server Running");
}).listen(port);
console.log("Server running on port", port);
--------------------------------------------------------
SET 7:
SET 7 
1. Write a JS program to perform Binary Search.  
2. Create a form such that CRUD operations can be performed on the 
student DB using ExpressJS. 
1)
function binarySearch(arr, target) {
    let l = 0, r = arr.length - 1;
    while (l <= r) {
        let mid = Math.floor((l + r) / 2);

        if (arr[mid] === target) return mid;
        else if (arr[mid] < target) l = mid + 1;
        else r = mid - 1;
    }
    return -1;
}
console.log(binarySearch([1,2,3,4,5], 1));
--------------------------------------------------------------
SET8:
SET 8 
1. Write a JS program to read from a JSON object and display the data 
in a table.  
2. Write a JS + AJAX program such that, based on location selected, 
weather details are fetched and displayed. 
1)
<!DOCTYPE html>
<html>
<body>
<script>
let data = [
  { name: "John", age: 20 },
  { name: "Nithisha", age: 22 }
];

let table = "<table border='1'><tr><th>Name</th><th>Age</th></tr>";
data.forEach(item => {
  table += `<tr><td>${item.name}</td><td>${item.age}</td></tr>`;
});
table += "</table>";
document.body.innerHTML = table;
</script>
</body>
</html>
2)
<!DOCTYPE html>
<html>
<head>
    <title>Weather App using AJAX</title>
</head>
<body>
    <h2>Select Location</h2>
    <select id="city">
        <option value="Hyderabad">Hyderabad</option>
        <option value="Mumbai">Mumbai</option>
        <option value="Chennai">Chennai</option>
    </select>
    <button onclick="getWeather()">Get Weather</button>
    <p id="result"></p>
    <script>
        const jsonData = `{
            "Hyderabad": { "temp": "32°C", "condition": "Sunny" },
            "Mumbai":    { "temp": "29°C", "condition": "Cloudy" },
            "Chennai":   { "temp": "35°C", "condition": "Hot" }
        }`;
        function getWeather() {
            let city = document.getElementById("city").value;
            let xhr = new XMLHttpRequest();
            xhr.open("GET", "data:application/json," + encodeURIComponent(jsonData), true);
            xhr.onload = function () {
                let data = JSON.parse(jsonData);
                let w = data[city];

                document.getElementById("result").innerHTML =
                    "Temperature: " + w.temp + " | Condition: " + w.condition;
            };
            xhr.send();
        }
    </script>
</body>
</html>
-----------------------------------------------------
SET-9:
1. Write a JS program to check whether an object contains a given property.  
2. Create a simple website for CRUD operations on student DB and apply 
Express Routing.
1)
let student = {
    name: "Nithisha",
    rollno: 101,
    marks: 89
};

let property = "cvndsnskj"; 

if (student.hasOwnProperty(property)) {
    console.log("Property exists");
} else {
    console.log("Property does NOT exist");
}
--------------------------------------------------------
SET-10:
1. Write a JS program to find the most frequent item in an array.  
2. Create a form such that CRUD operations can be performed on the 
student DB (using ExpressJS). 
1)let arr = [1,2,3,4,4,4,4,4,5,5,5];
let most = arr.sort((a,b) =>
  arr.filter(x => x === b).length-
  arr.filter(x => x === a).length
)[0];
console.log("Most frequent:", most);
2)
const express = require("express");
const app = express();
app.use(express.urlencoded({ extended: true }));
app.use(express.json());

let students = []; // Temporary DB

// HOME FORM
app.get("/", (req, res) => {
  res.send(`
    <h2>Student CRUD Form</h2>
    <form method="POST" action="/add">
      Roll No: <input name="roll"><br>
      Name: <input name="name"><br>
      <button type="submit">Add Student</button>
    </form>

    <br><a href="/all">View All Students</a>
  `);
});

// CREATE
app.post("/add", (req, res) => {
  students.push(req.body);
  res.send("Student Added<br><a href='/'>Back</a>");
});

// READ ALL
app.get("/all", (req, res) => {
  res.send(students);
});

// UPDATE
app.put("/update/:roll", (req, res) => {
  let r = req.params.roll;
  let s = students.find(st => st.roll === r);

  if (!s) return res.send("Student not found");

  s.name = req.body.name;
  res.send("Student Updated");
});

// DELETE
app.delete("/delete/:roll", (req, res) => {
  let r = req.params.roll;
  students = students.filter(st => st.roll !== r);
  res.send("Student Deleted");
});

// SERVER
app.listen(3000, () => console.log("Server running on http://localhost:3000"));

