{"ast":null,"code":"const DB_NAME = 'news-offline-db';\nconst DB_VERSION = 1;\nconst STORE = 'articles';\nfunction openDb() {\n  return new Promise((resolve, reject) => {\n    const req = indexedDB.open(DB_NAME, DB_VERSION);\n    req.onupgradeneeded = () => {\n      const db = req.result;\n      if (!db.objectStoreNames.contains(STORE)) db.createObjectStore(STORE, {\n        keyPath: 'id'\n      });\n    };\n    req.onsuccess = () => resolve(req.result);\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function saveOfflineArticle(article) {\n  const id = article.url || 'a-' + Date.now();\n  const db = await openDb();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE, 'readwrite');\n    const store = tx.objectStore(STORE);\n    store.put({\n      id,\n      article,\n      savedAt: Date.now()\n    });\n    tx.oncomplete = () => resolve(id);\n    tx.onerror = () => reject(tx.error);\n  });\n}\nexport async function getOfflineArticles() {\n  const db = await openDb();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE, 'readonly');\n    const store = tx.objectStore(STORE);\n    const req = store.getAll();\n    req.onsuccess = () => resolve(req.result.sort((a, b) => b.savedAt - a.savedAt));\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function removeOfflineArticle(id) {\n  const db = await openDb();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE, 'readwrite');\n    const store = tx.objectStore(STORE);\n    store.delete(id);\n    tx.oncomplete = () => resolve();\n    tx.onerror = () => reject(tx.error);\n  });\n}","map":{"version":3,"names":["DB_NAME","DB_VERSION","STORE","openDb","Promise","resolve","reject","req","indexedDB","open","onupgradeneeded","db","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","error","saveOfflineArticle","article","id","url","Date","now","tx","transaction","store","objectStore","put","savedAt","oncomplete","getOfflineArticles","getAll","sort","a","b","removeOfflineArticle","delete"],"sources":["C:/Users/Nithisha/Pictures/project/frontend/src/offline.js"],"sourcesContent":["const DB_NAME = 'news-offline-db';\r\nconst DB_VERSION = 1;\r\nconst STORE = 'articles';\r\n\r\nfunction openDb() {\r\n  return new Promise((resolve, reject) => {\r\n    const req = indexedDB.open(DB_NAME, DB_VERSION);\r\n    req.onupgradeneeded = () => {\r\n      const db = req.result;\r\n      if (!db.objectStoreNames.contains(STORE)) db.createObjectStore(STORE, { keyPath: 'id' });\r\n    };\r\n    req.onsuccess = () => resolve(req.result);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function saveOfflineArticle(article) {\r\n  const id = article.url || 'a-' + Date.now();\r\n  const db = await openDb();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction(STORE, 'readwrite');\r\n    const store = tx.objectStore(STORE);\r\n    store.put({ id, article, savedAt: Date.now() });\r\n    tx.oncomplete = () => resolve(id);\r\n    tx.onerror = () => reject(tx.error);\r\n  });\r\n}\r\n\r\nexport async function getOfflineArticles() {\r\n  const db = await openDb();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction(STORE, 'readonly');\r\n    const store = tx.objectStore(STORE);\r\n    const req = store.getAll();\r\n    req.onsuccess = () => resolve(req.result.sort((a,b)=>b.savedAt - a.savedAt));\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function removeOfflineArticle(id) {\r\n  const db = await openDb();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction(STORE, 'readwrite');\r\n    const store = tx.objectStore(STORE);\r\n    store.delete(id);\r\n    tx.oncomplete = () => resolve();\r\n    tx.onerror = () => reject(tx.error);\r\n  });\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}